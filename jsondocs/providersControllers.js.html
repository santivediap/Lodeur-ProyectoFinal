<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: providersControllers.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: providersControllers.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @author santivediap &lt;https://github.com/santivediap>
 * @exports providersControllers 
 * @namespace providersControllers
 */

const Provider = require('../models/providersSchema')

/**
  * &lt;pre>
  * Obtener providers
  * GET -> http://localhost:5000/api/providers
  * Obtiene todos los providers de la BBDD
  * &lt;/pre>
  * @memberof providersControllers 
  * @method getProviders 
  * @async 
  * @param {Object} req Objeto de petición HTTP (request)
  * @param {Object} res Objeto de respuesta HTTP (response)
  * @return {json} Objeto con lista de providers obtenidos
  * @throws {error} 
  */

const getProviders = async (req, res) => {
    try {
        const providers = await Provider.find({}, '-_id -__v');

        if(providers.length) {
          res.status(200).json(providers)
        } else {
          res.status(200).json({
            error: "No providers found!"
          })
        }
    } catch (error) {
        console.error(error);
        res.json({ error: "Internal server error" });
    }
}

/**
  * &lt;pre>
  * Crear nuevo provider
  * POST -> http://localhost:5000/api/providers
  * Crea un nuevo provider en la BBDD
  * Ejemplo:
  * {
  "name": "Eleggua",
  "CIF": "B59401863Q",
  "address": "C / de la Paz, 6"
}
  * &lt;/pre>
  * @memberof providersControllers 
  * @method createProvider 
  * @async 
  * @param {Object} req Objeto de petición HTTP (request)
  * @param {Object} res Objeto de respuesta HTTP (response)
  * @return {json} Objeto con provider creado
  * @throws {error} 
  */

const createProvider = async (req, res) => {
  const { name, CIF, address } = req.body;

  try {
    const newProvider = new Provider({
      name,
      CIF,
      address
    });

    const provider = await newProvider.save();
    res.json(provider);
  } catch (err) {
    console.error(err.message);
    res.status(500).send(`Server Error, POST Method: ${err.message}`);
  }
}

/**
  * &lt;pre>
  * Borrar un provider existente
  * DELETE -> http://localhost:5000/api/providers
  * Elimina una oferta de trabajo
  * Ejemplo:
  * {
    "title": "El Alquimista"
}
  * &lt;/pre>
  * @memberof providersControllers 
  * @method deleteProvider 
  * @async 
  * @param {Object} req Objeto de petición HTTP (request)
  * @param {Object} res Objeto de respuesta HTTP (response)
  * @return {json} Objeto con resultado del DELETE
  * @throws {error} 
  */

const deleteProvider = async (req, res) => {
    const { name } = req.body;
    try {
      const deletedOffer = await Provider.findOneAndDelete({name: name})
      res.status(200).json({
        msg: "Offer deleted",
        deletedOffer
      })
    } catch (error) {
      console.error(error);
      res.status(500).json({ error: "Internal server error" });
    }
    console.log("Your Offer Got Deleted:(");
  };

module.exports = {
    getProviders,
    createProvider,
    deleteProvider
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="productsControllers.html">productsControllers</a></li><li><a href="providersControllers.html">providersControllers</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Tue Jul 18 2023 01:10:13 GMT+0200 (hora de verano de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
